<!DOCTYPE html>
<html lang="en">
{% load static %}
<!-- {% static '/cs/style.css' %} -->

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>

  <title>Forms / Elements - NiceAdmin Bootstrap Template</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="{% static 'assets/img/favicon.png' %}" rel="icon">
  <link href="{% static 'assets/img/apple-touch-icon.png' %}" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.gstatic.com" rel="preconnect">
  <link
    href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
    rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="{% static 'assets/vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/bootstrap-icons/bootstrap-icons.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/boxicons/css/boxicons.min.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/quill/quill.snow.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/quill/quill.bubble.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/remixicon/remixicon.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/simple-datatables/style.css' %}" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="{% static 'assets/css/style.css' %}" rel="stylesheet">

  <!-- =======================================================
  * Template Name: NiceAdmin - v2.4.1
  * Template URL: https://bootstrapmade.com/nice-admin-bootstrap-admin-html-template/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
  
  <style>
    #myTable {
      border-collapse: collapse;
      width: 100%;
      border: 1px solid #ddd;
      font-size: 13px;
    }

    #myTable th,
    #myTable td {
      text-align: left;
      padding: 12px;
    }

    #myTable tr {
      border-bottom: 1px solid #ddd;
    }

    #myTable tr.header,
    #myTable tr:hover {
      background-color: #f1f1f1;
    }
  </style>
</head>

<body>
<div class="d-print-none">
  <!-- ======= Header ======= -->
  <header id="header" class="header fixed-top d-flex align-items-center">

    <div class="d-flex align-items-center justify-content-between">
      <!-- <a href="index.html" class="logo d-flex align-items-center">
        <img src="{% static 'assets/img/logo.png' %}" alt="">
        <span class="d-none d-lg-block">NiceAdmin</span>
      </a> -->
      <i class="bi bi-list toggle-sidebar-btn"></i>
    </div><!-- End Logo -->


    <nav class="header-nav ms-auto">
      <ul class="d-flex align-items-center">

    <li class="nav-item dropdown pe-3">

      <a class="nav-link nav-profile d-flex align-items-center pe-0" href="#" data-bs-toggle="dropdown">
        <img src="{% static 'assets/img/profile-img.jpg' %}" alt="Profile" class="rounded-circle">
        <span class="d-none d-md-block dropdown-toggle ps-2">K. Anderson</span>
      </a><!-- End Profile Iamge Icon -->

      <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow profile">
        <li class="dropdown-header">
          <h6>Kevin Anderson</h6>
          <span>Web Designer</span>
        </li>
        <li>
          <hr class="dropdown-divider">
        </li>

        <li>
          <a class="dropdown-item d-flex align-items-center" href="users-profile.html">
            <i class="bi bi-person"></i>
            <span>My Profile</span>
          </a>
        </li>
        <li>
          <hr class="dropdown-divider">
        </li>

        <li>
          <a class="dropdown-item d-flex align-items-center" href="users-profile.html">
            <i class="bi bi-gear"></i>
            <span>Account Settings</span>
          </a>
        </li>
        <li>
          <hr class="dropdown-divider">
        </li>

        <li>
          <a class="dropdown-item d-flex align-items-center" href="pages-faq.html">
            <i class="bi bi-question-circle"></i>
            <span>Need Help?</span>
          </a>
        </li>
        <li>
          <hr class="dropdown-divider">
        </li>

        <li>
          <a class="dropdown-item d-flex align-items-center" href="{% url 'logout' %}">
            <i class="bi bi-box-arrow-right"></i>
            <span>Sign Out</span>
          </a>
        </li>

      </ul><!-- End Profile Dropdown Items -->
    </li><!-- End Profile Nav -->

      </ul>
    </nav><!-- End Icons Navigation -->

  </header><!-- End Header -->

  <!-- ======= Sidebar ======= -->
  <aside id="sidebar" class="sidebar">
    <ul class="sidebar-nav" id="sidebar-nav">

      <li class="nav-item">
        <a class="nav-link collapsed" href="{% url 'index' %}">
          <i class="bi bi-grid"></i>
          <span>Dashboard</span>
        </a>
      </li><!-- End Dashboard Nav -->
      <hr>

      {% for entity in entities %}

      {% if entity.entity_name == entity_name %}
      <li class="nav-item">
        <a class="nav-link" href="{% url 'journal' entity.entity_name %}">
          <i class="bi bi-journal-text"></i>
          <span>{{entity_name}}</span>
        </a>
      </li>

      {% else %}
      <li class="nav-item">
        <a class="nav-link collapsed" href="{% url 'journal' entity.entity_name %}">
          <i class="bi bi-journal-text"></i>
          <span>{{entity.entity_name}}</span>
        </a>
      </li><!-- End Attendance Page Nav -->
            
      {% endif %}
      {% endfor %}
    </ul>

  </aside><!-- End Sidebar-->
<!-- End Sidebar-->


</div> 
<!-- end d-print none div -->


  <main id="main" class="main">

    <div class="pagetitle">
      <h1>{{entity_name}}</h1>
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item">Home</li>
          <li class="breadcrumb-item">{{entity_name}}</li>
          <li class="breadcrumb-item active">Journal</li>
        </ol>
      </nav>
    </div><!-- End Page Title -->

    <section class="section">
      <div class="row">
        <div class="col-lg-12">


          {% for message in messages %}
          <div class="alert alert-info alert-dismissible fade show" role="alert">
            <i class="bi bi-check-circle me-1"></i>
            {{message}}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
{% endfor %}


          <div class="card">
            <div class="card-body">


              <br>
              <center>
                <div class="btn-group" role="group" aria-label="Basic example"
                  style="box-shadow:0px 15px 20px rgb(200, 197, 240);">

                  <a><button type="button" class="btn btn-primary"
                      style="border-radius:6px 0px 0px 6px; background-color: rgb(0, 0, 197);height:100%">Journal</button></a>
                  <a href="{% url 'add transaction' entity_name %}">
                    <button type="button" class="btn btn-primary"
                      style="border-radius:0px;" href="{% url 'index' %}">Add
                      Transaction</button></a>
                  <a href="{% url 'balance sheet' entity_name %}">
                    <button type="button" class="btn btn-primary"
                      style="border-radius:0px 6px 6px 0px;">Balance Sheet</button></a>

                </div>
              </center>
                
                  <br>
                  <form method="POST">
                    {% csrf_token %}
                    <div class="row">
                      <div class="col-6">
                        <div class="form-floating">
                          <input type="date" class="form-control" id="from-date" name='from_date' placeholder="Your Name">
                          <label for="from-date">From</label>
                        </div>
                      </div>
                      <div class="col-6">
                        <div class="form-floating">
                          <input type="date" class="form-control" id="date_today_auto" name='to_date' placeholder="Your Name">
                          <label for="to-date">To</label>
                        </div>
                      </div>
                    </div>
                    <center><button type="submit" class="btn btn-primary" style="margin: 12px;">Filter</button></center>
                  </form>

              {% if from_date != None %}
              <h5 class="card-title" onclick="window.print()">Transactions from <b>{{from_date}}</b> to  <b>{{to_date}}</b></h5>
              {% else %}
              <h5 name='hhh' class="card-title" onclick="window.print()">All Transactions</h5>
              {% endif %}

              <h4 style="text-align:right;">Debit <span style="color:red;"><b> {{total_debit}} </b></span>  &nbsp;&nbsp;&nbsp;&nbsp;
                  Credit <span style="color:green;"><b> {{total_credit}}</b></span>
              </h4>

              <table id="myTable" class="sortable-table" style="background-color: white;">
                <tr class="header">
                  <th>#</th>
                  <th  onclick="">DATE</th>
                  <th  onclick="" class="numeric-sort">RCPT/VCHR NUM</th>
                  <th  onclick="sortTableText(2)" class="numeric-sort">ITEM</th>
                  <th  onclick="sortTableText(3)" class="numeric-sort">ACCOUNT</th>
                  <th   class="numeric-sort">DEBIT</th>
                  <th  onclick="" class="numeric-sort">CREDIT</th>
                </tr>
                {% for journal in journals %}
                <tr>
                <td>{{journal.id}}</td>
                  <td><a href="{% url 'edit transaction' journal.id %}">{{journal.date}}</a></td>
                  <td>{{journal.r_v_number}}</td>
                  <td>{{journal.item}}</td>
                  <td>{{journal.account}}</td>
                  {% if journal.debit != None %}
                  <td style="color:red;">{{journal.debit}}</td>
                  {% else %}
                  <td style="color:red;"></td>
                  {% endif %}

                  {% if journal.credit != None %}
                  <td style="color:green;">{{journal.credit}}</td>
                  {% else %}
                  <td style="color:green;"></td>
                  {% endif %}
                </tr>
                {% endfor %}
              </table>

          </div>
          </div>
        </div>


      </div>
    </section>

  </main><!-- End #main -->


  <div class="modal fade" id="basicModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Add a new Account</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <form method="post" action="">
          {% csrf_token %}
          <div class="modal-body">
            <div class="row mb-3">
              <label for="item" class="col-sm-4 col-form-label">Name of Account</label>
              <div class="col-sm-8">
                <input type="text" name='new_ac_name' class="form-control" placeholder="account name">
              </div>
            </div>
            <!-- Non omnis incidunt qui sed occaecati magni asperiores est mollitia. Soluta at et reprehenderit. Placeat autem numquam et fuga numquam. Tempora in facere consequatur sit dolor ipsum. Consequatur nemo amet incidunt est facilis. Dolorem neque recusandae quo sit molestias sint dignissimos. -->
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>

            <button type="submit" name='account_add_btn'>submit</button>
          </div>
        </form>
      </div>
    </div>
  </div><!-- End Basic Modal-->


  <script>
    function myFunction() {
      var input, filter, table, tr, td, i, txtValue;
      input = document.getElementById("myInput");
      filter = input.value.toUpperCase();
      table = document.getElementById("myTable");
      tr = table.getElementsByTagName("tr");
      for (i = 0; i < tr.length; i++) {
        td = tr[i].getElementsByTagName("td")[0];
        if (td) {
          txtValue = td.textContent || td.innerText;
          if (txtValue.toUpperCase().indexOf(filter) > -1) {
            tr[i].style.display = "";
          } else {
            tr[i].style.display = "none";
          }
        }       
      }
    }
    
    function sortTableText(n) {
      var table, rows, switching, i, x, y, shouldSwitch, dir, switchcount = 0;
      table = document.getElementById("myTable");
      switching = true;
      //Set the sorting direction to ascending:
      dir = "asc"; 
      /*Make a loop that will continue until
      no switching has been done:*/
      while (switching) {
        //start by saying: no switching is done:
        switching = false;
        rows = table.rows;
        /*Loop through all table rows (except the
        first, which contains table headers):*/
        for (i = 1; i < (rows.length - 1); i++) {
          //start by saying there should be no switching:
          shouldSwitch = false;
          /*Get the two elements you want to compare,
          one from current row and one from the next:*/
          x = rows[i].getElementsByTagName("TD")[n];
          y = rows[i + 1].getElementsByTagName("TD")[n];
          /*check if the two rows should switch place,
          based on the direction, asc or desc:*/
          if (dir == "asc") {
            if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
              //if so, mark as a switch and break the loop:
              shouldSwitch= true;
              break;
            }
          } else if (dir == "desc") {
            if (x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()) {
              //if so, mark as a switch and break the loop:
              shouldSwitch = true;
              break;
            }
          }
        }
        if (shouldSwitch) {
          /*If a switch has been marked, make the switch
          and mark that a switch has been done:*/
          rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
          switching = true;
          //Each time a switch is done, increase this count by 1:
          switchcount ++;      
        } else {
          /*If no switching has been done AND the direction is "asc",
          set the direction to "desc" and run the while loop again.*/
          if (switchcount == 0 && dir == "asc") {
            dir = "desc";
            switching = true;
          }
        }
      }
    }
    function sortTable( n) {
var table, rows, switching, i, x, y, shouldSwitch, dir, switchcount = 0;

table = document.getElementById("myTable")[0];
switching = true;
dir = "asc";
while (switching) {
    switching = false;
    rows = table.getElementsByTagName("TR");
    for (i = 1; i < (rows.length - 1); i++) {
        shouldSwitch = false;
        x = rows[i].getElementsByTagName("TD")[n];
        y = rows[i + 1].getElementsByTagName("TD")[n];
                var cmpX=isNaN(parseInt(x.innerHTML))?x.innerHTML.toLowerCase():parseInt(x.innerHTML);
                var cmpY=isNaN(parseInt(y.innerHTML))?y.innerHTML.toLowerCase():parseInt(y.innerHTML);
cmpX=(cmpX=='-')?0:cmpX;
cmpY=(cmpY=='-')?0:cmpY;
        if (dir == "asc") {
            if (cmpX > cmpY) {
                shouldSwitch= true;
                break;
            }
        } else if (dir == "desc") {
            if (cmpX < cmpY) {
                shouldSwitch= true;
                break;
            }
        }
    }
    if (shouldSwitch) {
        rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
        switching = true;
        switchcount ++;      
    } else {
        if (switchcount == 0 && dir == "asc") {
            dir = "desc";
            switching = true;
        }
    }
}
}


var date = new Date();

var day = date.getDate();
var month = date.getMonth() + 1;
var year = date.getFullYear();

if (month < 10) month = "0" + month;
if (day < 10) day = "0" + day;

var today = year + "-" + month + "-" + day;       
document.getElementById("date_today_auto").value = today;
    
    </script>


  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i
      class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="{% static 'assets/vendor/apexcharts/apexcharts.min.js' %}"></script>
  <script src="{% static 'assets/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
  <script src="{% static 'assets/vendor/chart.js/chart.min.js' %}"></script>
  <script src="{% static 'assets/vendor/echarts/echarts.min.js' %}"></script>
  <script src="{% static 'assets/vendor/quill/quill.min.js' %}"></script>
  <script src="{% static 'assets/vendor/simple-datatables/simple-datatables.js' %}"></script>
  <script src="{% static 'assets/vendor/tinymce/tinymce.min.js' %}"></script>
  <script src="{% static 'assets/vendor/php-email-form/validate.js' %}"></script>

  <!-- Template Main JS File -->
  <script src="{% static 'assets/js/main.js' %}"></script>

</body>

</html>